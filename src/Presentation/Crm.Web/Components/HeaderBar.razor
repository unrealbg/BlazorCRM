@rendermode InteractiveServer

<header class="crm-header sticky top-0 z-30 glass backdrop-blur-md border-b border-white/30 dark:border-white/10">
    <div class="max-w-screen-2xl mx-auto px-3">
        <div class="crm-header-inner h-12 flex items-center justify-between gap-2">
            <div class="flex items-center gap-2">
                                <button id="openSidebar" class="lg:hidden inline-flex h-9 w-9 items-center justify-center rounded-xl bg-white/70 dark:bg-slate-800/60" @onclick="ToggleSidebar" aria-label="Open sidebar">
                                    <svg viewBox="0 0 24 24" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M4 6h16"></path>
                                        <path d="M4 12h16"></path>
                                        <path d="M4 18h16"></path>
                                    </svg>
                                </button>
            </div>
            <div class="flex items-center gap-2">
                <button id="openSearchOverlay" class="crm-mobile-search-trigger" aria-label="Open search">
                    <svg viewBox="0 0 24 24" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="7"></circle>
                        <path d="M20 20l-3.5-3.5"></path>
                    </svg>
                    <span class="text-sm text-slate-500">Search (Ctrl+Shift+K)</span>
                </button>
                <button class="btn btn-primary" @onclick="OpenQuickCreate">+ Create</button>
                <AuthorizeView>
                    <Authorized>
                                                <button id="notifBtn" class="relative inline-flex h-9 w-9 items-center justify-center rounded-xl bg-white/70 dark:bg-slate-800/60" aria-label="Notifications">
                                                    <svg viewBox="0 0 24 24" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                        <path d="M18 8a6 6 0 0 0-12 0c0 7-3 7-3 7h18s-3 0-3-7"></path>
                                                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                                                    </svg>
                                                    <span id="notifBadge" class="absolute -top-1 -right-1 h-5 min-w-[20px] px-1 text-[10px] leading-5 text-center rounded-full bg-pink-600 text-white hidden">3</span>
                                                </button>
                        <div class="relative">
                            <button id="userMenuBtn" class="inline-flex items-center gap-2 rounded-xl bg-white/70 dark:bg-slate-800/60 px-2 py-1 border border-white/40 dark:border-white/10">
                                <img src="https://i.pravatar.cc/40" alt="User avatar" class="h-7 w-7 rounded-lg" />
                                <span class="hidden sm:block text-sm font-medium">@context.User?.Identity?.Name</span>
                            </button>
                            <div id="userMenu" class="absolute right-0 mt-2 w-56 card p-2 hidden">
                                <a class="crm-menu-item" href="/settings">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
                                        <circle cx="12" cy="12" r="3"></circle>
                                        <path d="M19 12a7 7 0 0 0-.1-1l2-1.2-2-3.5-2.3.9a7 7 0 0 0-1.7-1l-.3-2.5H9.4l-.3 2.5a7 7 0 0 0-1.7 1l-2.3-.9-2 3.5 2 1.2a7 7 0 0 0 0 2l-2 1.2 2 3.5 2.3-.9a7 7 0 0 0 1.7 1l.3 2.5h4.2l.3-2.5a7 7 0 0 0 1.7-1l2.3.9 2-3.5-2-1.2c.1-.3.1-.7.1-1z"></path>
                                    </svg>
                                    Settings
                                </a>
                                <hr class="crm-menu-divider">
                                <a class="crm-menu-item" href="/logout">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
                                        <path d="M10 17l5-5-5-5"></path>
                                        <path d="M15 12H3"></path>
                                        <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                                    </svg>
                                    Sign out
                                </a>
                            </div>
                        </div>
                    </Authorized>
                    <NotAuthorized>
                        <a class="btn btn-muted" href="/login">Sign in</a>
                    </NotAuthorized>
                </AuthorizeView>
            </div>
        </div>
    </div>
</header>


